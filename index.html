<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>esp32-rotary-encoder: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">esp32-rotary-encoder
   </div>
   <div id="projectbrief">ESP32-compatible C library for Incremental Rotary Encoders.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">esp32-rotary-encoder Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://docs.espressif.com/projects/esp-idf/en/stable/get-started/">![Platform: ESP-IDF](https://img.shields.io/badge/ESP--IDF-v3.0%2B-blue.svg)</a> <a href="https://www.gnu.org/licenses/gpl-3.0">![License: GPL v3](https://img.shields.io/badge/License-GPLv3+-blue.svg)</a></p>
<h2>Introduction</h2>
<p>This ESP32 component uses a debouncing state machine to track the position of an <a href="https://en.wikipedia.org/wiki/Rotary_encoder#Incremental">incremental</a> rotary encoder such as the <a href="https://www.alps.com/prod/info/E/HTML/Encoder/Incremental/EC11/EC11_list.html">EC11</a> or <a href="https://www.codrey.com/electronic-circuits/paupers-rotary-encoder/">LPD3806</a>.</p>
<p>These encoders provide two outputs (typically "A" and "B") that have a quadrature relationship - that is, they oscillate between high and low as the shaft rotates, but with a 90 degree phase offset. Therefore the outputs <code>AB</code> may go through the following pattern: <code>00</code>, <code>10</code>, <code>11</code>, <code>01</code>, <code>00</code> ... The direction can be determined by observing the order of this pattern. This component uses a state machine to decode the sequence of quadrature states, and therefore provides a fairly glitch-free and accurate measurement of the encoder's movement.</p>
<p>Interrupts are registered on the A and B pins to detect edges. This component assumes that <code>gpio_install_isr_service()</code> has been called prior.</p>
<p>The direction event is placed into a FreeRTOS queue and can be used by a task to increment or decrement a counter that represents the encoder's absolute position.</p>
<p>Encoders that provide a push button are supported, however this component does not provide direct support for the button. Typically, the button is normally open and pushing it closes the contacts, which can be used to pull a GPIO pin high or low depending on arrangement. This can be detected with a normal GPIO poll or interrupt.</p>
<h2>Dependencies</h2>
<p>It is written and tested for v3.0-v3.2 of the <a href="https://github.com/espressif/esp-idf">ESP-IDF</a> environment, using the xtensa-esp32-elf toolchain (gcc version 5.2.0). It may or may not work with older or newer versions.</p>
<h2>Example</h2>
<p>An example application that uses this component is available: <a href="https://github.com/DavidAntliff/esp32-rotary-encoder-example">esp32-rotary-encoder-example</a></p>
<h2>Features</h2>
<ul>
<li>Publication of an event into a user-supplied queue when the encoder moves to either a full or half step:<ul>
<li>Full step mode, where the encoder must move through an entire sequence of four steps before an event is published.</li>
<li>Half step mode, where the encoder must move through half an entire sequence (two steps) before an event is published.</li>
</ul>
</li>
</ul>
<h2>Documentation</h2>
<p>Automatically generated API documentation is available <a href="https://davidantliff.github.io/esp32-rotary-encoder/index.html">here</a>.</p>
<h2>Source Code</h2>
<p>The source is available from <a href="https://www.github.com/DavidAntliff/esp32-rotary-encoder">GitHub</a>.</p>
<h2>License</h2>
<p>The code in this project is licensed under the GNU GPL Version 3, or (at your option) any later version. - see [LICENSE](LICENSE) for details.</p>
<h2>Links</h2>
<ul>
<li><a href="https://github.com/DavidAntliff/esp32-rotary-encoder-example">esp32-rotary-encoder-example</a></li>
<li><a href="https://github.com/espressif/esp-idf">Espressif IoT Development Framework for ESP32</a></li>
</ul>
<h2>Acknowledgements</h2>
<p>Thank you to <a href="#" onclick="location.href='mai'+'lto:'+'//b'+'b@'+'cac'+'ti'+'i.n'+'et'; return false;">Ben Buxton</a> who provided the <a href="https://github.com/buxtronix/arduino/tree/master/libraries/Rotary">original</a> Arduino code that this component is based upon. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
